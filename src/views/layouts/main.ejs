<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= typeof title !== 'undefined' ? title : 'BookNotes' %> | BookNotes</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class = "app-container">
        <aside class = "sidebar">
            <div class = "sidebar-header">
                <div class = "logo">
                    <i class = "fas fa-book"></i>
                    <span>BookNotes</span>
                </div>
            </div>

            <nav class = "sidebar-nav">
                <a href = "/dashboard" class = "nav-item <%= page === 'dashboard' ? 'active' : '' %>">
                    <i class = "fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href = "/books" class = "nav-item <%= page === 'books' ? 'active' : '' %>">
                    <i class = "fas fa-book"></i>
                    <span>My Books</span>
                </a>
                <a href = "/quotes" class = "nav-item <%= page === 'quotes' ? 'active' : '' %>">
                    <i class = "fas fa-quote-right"></i>
                    <span>Quotes</span>
                </a>
                <a href = "/stats" class = "nav-item <%= page === 'stats' ? 'active' : '' %>">
                    <i class = "fas fa-chart-bar"></i>
                    <span>Statistics</span>
                </a>
            </nav>

            <div class = "sidebar-footer">
                <a href = "/auth/logout" class = "nav-item">
                    <i class = "fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </div>
        </aside>

        <div class = "main-content">
            <header class = "topbar">
                <div class = "topbar-left">
                    <h1><%= typeof title !== 'undefined' ? title : 'Dashboard' %></h1>
                </div>
                <div class = "topbar-right">
                    <div class = "user-info">
                        <i class = "fas fa-user-circle"></i>
                        <span><%= user ? user.username : 'Guest' %></span>
                    </div>
                </div>
            </header>

            <% if (typeof success !== 'undefined' && success.length > 0) { %>
                <div class = "alert alert-success">
                    <i class = "fas fa-chechk-circle"></i>
                    <%= success %>
                </div>
            <% } %>
            <% if (typeof error !== 'undefined' && error.length > 0) { %>
                <div class = "alert alert-error"> 
                    <i class = "fas fa-exclamation-circle"></i>
                    <%= error %>
                </div>
            <% } %>

            <div class = "content">
                <%- body %>
            </div>
        </div>
    </div>
</body>
</html>